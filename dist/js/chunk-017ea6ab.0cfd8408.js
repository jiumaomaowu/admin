(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-017ea6ab"],{"0731":function(t,e,a){"use strict";var o=a("e2db"),i=a.n(o);i.a},"74de":function(t,e,a){var o=a("d635"),i=a("2b11");t.exports=function(t,e,a){if(o(e))throw TypeError("String#"+a+" doesn't accept regex!");return String(i(t))}},"8b28":function(t,e,a){"use strict";a.r(e);var o,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:t.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"工号"},model:{value:t.filters.id,callback:function(e){t.$set(t.filters,"id",e)},expression:"filters.id"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"姓名"},model:{value:t.filters.name,callback:function(e){t.$set(t.filters,"name",e)},expression:"filters.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.getAdmin}},[t._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd(e)}}},[t._v("新增")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.users,"highlight-current-row":""},on:{"selection-change":t.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{type:"index",label:"ID",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"job_number",label:"工号","min-width":"80",sortable:"",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名","min-width":"80",sortable:"",align:"center"}}),a("el-table-column",{attrs:{prop:"mailbox",label:"邮箱","min-width":"90",sortable:"",align:"center"}}),a("el-table-column",{attrs:{label:"管理员状态","min-width":"80",sortable:"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-text":"启用","inactive-text":"关闭"},on:{change:function(a){return t.changestatu(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return t.handleEdit(e.$index,e.row,a)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.handleDel(e.$index,e.row,a)}}},[t._v("删除")])]}}])})],1),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:t.batchRemove}},[t._v("批量删除")]),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":10,total:t.total},on:{"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"新增",visible:t.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.addFormVisible=e}}},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"120px",rules:t.addFormRules}},[a("el-form-item",{attrs:{label:"工号",prop:"job_number"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addForm.job_number,callback:function(e){t.$set(t.addForm,"job_number",e)},expression:"addForm.job_number"}})],1),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"mailbox"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addForm.mailbox,callback:function(e){t.$set(t.addForm,"mailbox",e)},expression:"addForm.mailbox"}})],1),a("el-form-item",{attrs:{label:"是否启用管理员",prop:"status"}},[a("el-switch",{model:{value:t.addForm.status,callback:function(e){t.$set(t.addForm,"status",e)},expression:"addForm.status"}})],1),a("el-form-item",{attrs:{label:"随机密码",prop:"password"}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addForm.password,callback:function(e){t.$set(t.addForm,"password",e)},expression:"addForm.password"}})],1),a("el-col",{attrs:{span:4,align:"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.createPassword}},[t._v("随机生成")])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.addFormVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.addLoading},nativeOn:{click:function(e){return t.addSubmit(e)}}},[t._v("提交")])],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:t.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.editFormVisible=e}}},[a("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"120px",rules:t.addFormRules}},[a("el-form-item",{attrs:{label:"工号",prop:"job_number"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editForm.job_number,callback:function(e){t.$set(t.editForm,"job_number",e)},expression:"editForm.job_number"}})],1),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"mailbox"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editForm.mailbox,callback:function(e){t.$set(t.editForm,"mailbox",e)},expression:"editForm.mailbox"}})],1),a("el-form-item",{attrs:{label:"是否启用管理员",prop:"status"}},[a("el-switch",{model:{value:t.editForm.status,callback:function(e){t.$set(t.editForm,"status",e)},expression:"editForm.status"}})],1),a("el-form-item",{attrs:{label:"随机密码",prop:"password"}},[a("el-row",[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editForm.password,callback:function(e){t.$set(t.editForm,"password",e)},expression:"editForm.password"}})],1),a("el-col",{attrs:{span:4,align:"right"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.createPassword}},[t._v("随机生成")])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(e){t.editFormVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",loading:t.editLoading},nativeOn:{click:function(e){return t.editSubmit(e)}}},[t._v("提交")])],1)],1)],1)},n=[],r=a("a98d"),s=a("d4fd"),l=(a("48fb"),a("e4a7")),d=a.n(l),c=(a("e0c1"),a("93fe"),a("3a23"),a("26e8")),m=a("4ec3"),u=a("d73b"),f=a.n(u),b=a("52c1"),p={data:function(){return{filters:{name:"",id:""},value1:!0,value2:!0,users:[],total:0,page:1,listLoading:!1,sels:[],role:"",editFormVisible:!1,editLoading:!1,addLoading:!1,addFormVisible:!1,addFormRules:{hospital_name:[{required:!0,message:"请输入医院名称",trigger:"blur"}],region_type:[{required:!0,message:"请选择所属大区",trigger:"change"}],name:[{required:!0,message:"请输入负责人姓名",trigger:"blur"}]},addForm:{job_number:"",name:"",mailbox:"",status:"",password:""},editForm:{job_number:"",name:"",mailbox:"",status:"",password:""}}},methods:(o={selsChange:function(){},formatSex:function(){},changestatu:function(t){var e=this;console.log(t),Object(m["l"])(t).then(function(t){var a=t.code,o=t.message;200!==a?e.$message({message:o,type:"error"}):e.$message({message:o,type:"success"})})},createPassword:function(){var t=e(8,15);function e(t,e){var a=["0","1","2","3","4","5","6","7","8","9"],o=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],i=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n=["-","_","#","@","$","%","&","*"],r=a.concat(o).concat(i).concat(n),s=[];s.push(u(a)),s.push(u(o)),s.push(u(i)),s.push(u(n));for(var l=t+Math.floor(Math.random()*(e-t+1)),d=4;d<l;d++)s.push(r[Math.floor(Math.random()*r.length)]);for(var c=[],m=0;m<l;m++)c.push(s.splice(Math.random()*s.length,1)[0]);function u(t){return t[Math.floor(Math.random()*t.length)]}return c.join("")}this.addForm.password=t,this.editForm.password=t,console.log(t)},handleCurrentChange:function(t){this.page=t,this.getAdmin()},getAdmin:function(){var t=this,e=JSON.parse(window.localStorage.getItem("userInfo")),a=JSON.parse(window.localStorage.getItem("row")),o={page:this.page,adminName:this.filters.name,adminId:this.filters.id,menuId:a.id,roleId:e.role_id};this.listLoading=!0,console.log(this.row),Object(m["t"])(o).then(function(e){console.log(e),t.total=e.data.total,t.users=e.data.dataAdmin,t.role=e.data.role,t.listLoading=!1})},handleAdd:function(t){if(!this.check(t.target.innerText))return Object(c["Notification"])({title:"警告",message:"没有权限,请与管理员联系",type:"warning"}),!1;this.addFormVisible=!0,this.addForm={job_number:"",name:"",mailbox:"",status:!1,password:""}},check:function(t){return this.role.includes(t)},addSubmit:function(t){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addLoading=!0;var t=d()({},e.addForm);console.log(t),Object(m["a"])(t).then(function(t){e.addLoading=!1;var a=t.code,o=t.message;200!==a?e.$message({message:o,type:"error"}):(e.$message({message:o,type:"success"}),e.$refs["addForm"].resetFields(),e.addFormVisible=!1,e.getAdmin())})})})},handleEdit:function(t,e,a){if(!this.check(a.target.innerText))return Object(c["Notification"])({title:"警告",message:"没有权限,请与管理员联系",type:"warning"}),!1;e.id,this.editFormVisible=!0,this.editForm=d()({},e)},editSubmit:function(){var t=this;this.$refs.editForm.validate(function(e){e&&t.$confirm("确认提交吗？","提示",{}).then(function(){t.editLoading=!0;var e=d()({},t.editForm);e.birth=e.birth&&""!=e.birth?util.formatDate.format(new Date(e.birth),"yyyy-MM-dd"):"",Object(m["m"])(e).then(function(e){t.editLoading=!1,t.$message({message:"提交成功",type:"success"}),t.$refs["editForm"].resetFields(),t.editFormVisible=!1,t.getAdmin()})})})},handleDel:function(t,e,a){var o=this;if(!this.check(a.target.innerText))return Object(c["Notification"])({title:"警告",message:"没有权限,请与管理员联系",type:"warning"}),!1;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){o.listLoading=!0;var t={id:e.id};Object(m["I"])(t).then(function(t){o.listLoading=!1,o.$message({message:"删除成功",type:"success"}),o.getAdmin()})}).catch(function(){})}},Object(s["a"])(o,"selsChange",function(t){this.sels=t}),Object(s["a"])(o,"batchRemove",function(){var t=this,e=this.sels.map(function(t){return t.id}).toString();this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){t.listLoading=!0;var a={ids:e};Object(m["g"])(a).then(function(e){t.listLoading=!1,t.$message({message:"删除成功",type:"success"}),t.getAdmin()})}).catch(function(){})}),o),mounted:function(){this.getAdmin()},computed:Object(r["a"])({},Object(b["c"])(["row"])),components:{VDistpicker:f.a}},g=p,h=(a("0731"),a("17cc")),v=Object(h["a"])(g,i,n,!1,null,"b6dc8bb4",null);e["default"]=v.exports},"93fe":function(t,e,a){"use strict";var o=a("2d2c"),i=a("74de"),n="includes";o(o.P+o.F*a("dd8b")(n),"String",{includes:function(t){return!!~i(this,t,n).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},dd8b:function(t,e,a){var o=a("f3ae")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[o]=!1,!"/./"[t](e)}catch(i){}}return!0}},e0c1:function(t,e,a){"use strict";var o=a("2d2c"),i=a("0d0d")(!0);o(o.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),a("68fb")("includes")},e2db:function(t,e,a){}}]);
//# sourceMappingURL=chunk-017ea6ab.0cfd8408.js.map