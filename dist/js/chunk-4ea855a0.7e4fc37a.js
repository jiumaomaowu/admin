(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ea855a0"],{"1c67":function(e,t,a){"use strict";var n=a("a173"),o=a.n(n);o.a},"1d3f":function(e,t,a){},"27b4":function(e,t,a){},"4fbb":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.filters}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"菜单名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"}},[e._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAdd(t)}}},[e._v("新增")])],1)],1)],1),a("tree-table",{attrs:{data:e.data,"eval-func":e.func,"eval-args":e.args,"expand-all":e.expandAll,stripe:""}},[a("el-table-column",{attrs:{label:"菜单名称",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.meta.title))])]}}])}),a("el-table-column",{attrs:{label:"链接",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.path))])]}}])}),a("el-table-column",{attrs:{label:"组件",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.component))])]}}])}),a("el-table-column",{attrs:{label:"Icon",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.icon))])]}}])}),a("el-table-column",{attrs:{label:"排序",align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.sort))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleEdit(t.$index,t.row,a)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.handleDel(t.$index,t.row,a)}}},[e._v("删除")])]}}])})],1),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":10,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"120px",rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"顶级菜单",prop:"top_menu"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:e.change},model:{value:e.addForm.top_menu,callback:function(t){e.$set(e.addForm,"top_menu",t)},expression:"addForm.top_menu"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),"顶级菜单"==e.addForm.top_menu?a("el-form-item",{attrs:{label:"菜单名称",prop:"redirect"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.addForm.redirect,callback:function(t){e.$set(e.addForm,"redirect",t)},expression:"addForm.redirect"}})],1):a("el-form-item",{attrs:{label:"子菜单名称",prop:"childname"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.addForm.childname,callback:function(t){e.$set(e.addForm,"childname",t)},expression:"addForm.childname"}})],1),a("el-form-item",{attrs:{label:"链接",prop:"path"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.addForm.path,callback:function(t){e.$set(e.addForm,"path",t)},expression:"addForm.path"}})],1),a("el-form-item",{attrs:{label:"Icon",prop:"icon"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.addForm.icon,callback:function(t){e.$set(e.addForm,"icon",t)},expression:"addForm.icon"}})],1),a("el-form-item",{attrs:{label:"组件名称",prop:"component"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.addForm.component,callback:function(t){e.$set(e.addForm,"component",t)},expression:"addForm.component"}})],1),a("el-form-item",{attrs:{label:"权限按钮",prop:"btn"}},[a("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",size:"medium",placeholder:"请选择权限按钮"},on:{"visible-change":function(t){return e.selectChange(t,e.addForm.sonData)}},model:{value:e.addForm.sonData,callback:function(t){e.$set(e.addForm,"sonData",t)},expression:"addForm.sonData"}},e._l(e.options5,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input-number",{attrs:{min:1,max:100,label:"描述文字"},on:{change:e.handleChange},model:{value:e.addForm.sort,callback:function(t){e.$set(e.addForm,"sort",t)},expression:"addForm.sort"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"120px",rules:e.addFormRules}},[a("el-form-item",{attrs:{label:"上级菜单",prop:"top_menu"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.editForm.top_menu,callback:function(t){e.$set(e.editForm,"top_menu",t)},expression:"editForm.top_menu"}},e._l(e.options,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),"顶级菜单"===e.editForm.top_menu?a("el-form-item",{attrs:{label:"菜单名称",prop:"redirect"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.redirect,callback:function(t){e.$set(e.editForm,"redirect",t)},expression:"editForm.redirect"}})],1):a("el-form-item",{attrs:{label:"子菜单名称",prop:"childname"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.childname,callback:function(t){e.$set(e.editForm,"childname",t)},expression:"editForm.childname"}})],1),a("el-form-item",{attrs:{label:"链接",prop:"path"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.editForm.path,callback:function(t){e.$set(e.editForm,"path",t)},expression:"editForm.path"}})],1),a("el-form-item",{attrs:{label:"Icon",prop:"icon"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.editForm.icon,callback:function(t){e.$set(e.editForm,"icon",t)},expression:"editForm.icon"}})],1),a("el-form-item",{attrs:{label:"组件名称",prop:"component"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.editForm.component,callback:function(t){e.$set(e.editForm,"component",t)},expression:"editForm.component"}})],1),a("el-form-item",{attrs:{label:"权限按钮",prop:"btn"}},[a("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",size:"medium",placeholder:"请选择权限按钮"},on:{"visible-change":function(t){return e.selectChange(t,e.editForm.sonData)}},model:{value:e.editForm.sonData,callback:function(t){e.$set(e.editForm,"sonData",t)},expression:"editForm.sonData"}},e._l(e.options5,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input-number",{attrs:{min:1,max:100,label:"描述文字"},on:{change:e.handleChange},model:{value:e.editForm.sort,callback:function(t){e.$set(e.editForm,"sort",t)},expression:"editForm.sort"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("提交")])],1)],1)],1)},o=[],l=(a("ea65"),a("612f"),a("e4a7")),r=a.n(l),i=(a("e0c1"),a("93fe"),a("3a23"),a("a98d")),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",e._b({attrs:{data:e.formatData,"row-style":e.showRow}},"el-table",e.$attrs,!1),[0===e.columns.length?a("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row._level,function(e){return a("span",{key:e,staticClass:"ms-tree-space"})}),e.iconShow(0,t.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(a){return e.toggleExpanded(t.$index)}}},[t.row._expanded?a("i",{staticClass:"el-icon-arrow-down"}):a("i",{staticClass:"el-icon-arrow-right"})]):e._e()]}}],null,!1,1542157147)}):e._l(e.columns,function(t,n){return a("el-table-column",{key:t.value,attrs:{label:t.text,width:t.width},scopedSlots:e._u([{key:"default",fn:function(o){return[e._l(o.row._level,function(t){return 0===n?a("span",{key:t,staticClass:"ms-tree-space"}):e._e()}),e.iconShow(n,o.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(t){return e.toggleExpanded(o.$index)}}},[o.row._expanded?a("i",{staticClass:"el-icon-minus"}):a("i",{staticClass:"el-icon-plus"})]):e._e(),e._v("\n      "+e._s(o.row[t.value])+"\n    ")]}}],null,!0)})}),e._t("default")],2)},c=[],d=a("b09e"),u=a("b337"),m=a.n(u),p=a("f0b9"),f=a.n(p),b=a("2418");function h(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=[];return f()(e).forEach(function(e){void 0===e._expanded&&b["default"].set(e,"_expanded",t);var l=1;if(void 0!==n&&null!==n&&(l=n+1),b["default"].set(e,"_level",l),a&&b["default"].set(e,"parent",a),o.push(e),e.children&&e.children.length>0){var r=h(e.children,t,e,l);o=o.concat(r)}}),o}var g={name:"TreeTable",props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1}},computed:{formatData:function(){var e;e=m()(this.data)?this.data:[this.data];var t=this.evalFunc||h,a=this.evalArgs?[e,this.expandAll].concat(Object(d["a"])(this.evalArgs)):[e,this.expandAll];return t.apply(null,a)}},methods:{showRow:function(e){var t=!e.row.parent||e.row.parent._expanded&&e.row.parent._show;return e.row._show=t,t?"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;":"display:none;"},toggleExpanded:function(e){var t=this.formatData[e];t._expanded=!t._expanded},iconShow:function(e,t){return 0===e&&t.children&&t.children.length>0}}},v=g,F=(a("e9b3"),a("7b03"),a("17cc")),_=Object(F["a"])(v,s,c,!1,null,"0cd98d79",null),w=_.exports;function x(e,t,a,n,o){var l=[],r=[];return f()(e).forEach(function(e){void 0===e._expanded&&b["default"].set(e,"_expanded",t);var i=1;if(void 0!==n&&null!==n&&(i=n+1),b["default"].set(e,"_level",i),a?(b["default"].set(e,"parent",a),l[i]||(l[i]=0),b["default"].set(e,"_marginLeft",l[i]+a._marginLeft),b["default"].set(e,"_width",e[o]/a[o]*a._width),l[i]+=e._width):(l[e.id]=[],l[e.id][i]=0,b["default"].set(e,"_marginLeft",0),b["default"].set(e,"_width",1)),r.push(e),e.children&&e.children.length>0){var s=x(e.children,t,e,i,o);r=r.concat(s)}}),r}var k=a("26e8"),y=(a("c2fd"),a("4ec3")),$=a("52c1"),O=a("5f87"),S=a("6191"),C=a("c1f9"),j=a.n(C),D={name:"CustomTreeTableDemo",components:{treeTable:w},data:function(){return{filters:{name:"",id:""},total:0,page:1,listLoading:!1,options:[{value:"0",label:"顶级菜单",id:0}],options5:[{value:"add",label:"新增"},{value:"edit",label:"编辑"}],role:[],addLoading:!1,addFormVisible:!1,editLoading:!1,editFormVisible:!1,addFormRules:{},addForm:{redirect:"",top_menu:"",path:"",icon:"",sort:"",component:"",sonData:[],childname:""},editForm:{redirect:"",top_menu:"",path:"",icon:"",sort:"",component:"",children:[],sonData:[],childname:""},func:x,expandAll:!1,data:[],args:[null,null,"timeLine"]}},methods:Object(i["a"])({},Object($["b"])(["addMenu","row"]),{changeValue:function(e,t){console.log(e,t)},handleChange:function(){},message:function(e){this.$message.info(e.event)},selectChange:function(e,t){var a=this;console.log(e,t),e&&Object(y["G"])().then(function(e){console.log(e),a.options5=e})},handleCurrentChange:function(){},getMenu:function(){var e=this,t=JSON.parse(window.localStorage.getItem("userInfo")),a=JSON.parse(window.localStorage.getItem("row")),n={page:this.page,menuName:this.filters.name,menuId:a.id,roleId:t.role_id};this.listLoading=!0,Object(y["D"])(n).then(function(t){console.log(t),e.total=t.total,e.role=t.role,e.data=t.dataMenu,e.listLoading=!1})},change:function(e){console.log(e),"顶级菜单"==e&&(this.addForm.path="/",this.addForm.component="layout")},handleAdd:function(e){var t=this;if(console.log(e.target.innerText),!this.check(e.target.innerText))return Object(k["Notification"])({title:"警告",message:"没有权限,请与管理员联系",type:"warning"}),!1;this.addFormVisible=!0,this.addForm={redirect:"",top_menu:"",path:"",icon:"",sort:"",component:"",sonData:[],childname:""},Object(y["R"])().then(function(e){t.options=e.topmenu})},check:function(e){return this.role.includes(e)},addSubmit:function(e){var t=this;this.$refs.addForm.validate(function(e){e&&t.$confirm("确认提交吗？","提示",{}).then(function(){t.addLoading=!0;var e=r()({},t.addForm);console.log(e),Object(y["d"])(e).then(function(e){var a=[];t.addLoading=!1;var n=e.code,o=e.message,l=e.user;console.log(e),200!==n?t.$message({message:o,type:"error"}):(t.$message({message:o,type:"success"}),t.addMenu(e.user),Object(S["a"])(a,l),t.$router.options.routes=a,t.$router.addRoutes(a),Object(O["c"])(e.user),t.$refs["addForm"].resetFields(),t.addFormVisible=!1,t.getMenu())})})})},handleEdit:function(e,t,a){var n=this;if(!this.check(a.target.innerText))return Object(k["Notification"])({title:"警告",message:"没有权限,请与管理员联系",type:"warning"}),!1;this.editFormVisible=!0,console.log(t);var o=[];t.sonData.forEach(function(e){j.a.split(e,"_",2)[1]&&(e=j.a.split(e,"_",2)[1]),e&&o.push(e)}),t.sonData=o,console.log(t.sonData),this.editForm=r()({},t),Object(y["R"])().then(function(e){n.options=e.topmenu})},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=r()({},e.editForm);delete t.children,delete t.parent,console.log(t),Object(y["p"])(t).then(function(t){var a=[];e.editLoading=!1;var n=t.code,o=t.message,l=t.user;200!==n?e.$message({message:o,type:"error"}):(e.$message({message:o,type:"success"}),console.log(t),e.addMenu(t.user),Object(S["a"])(a,l),e.$router.options.routes=a,e.$router.addRoutes(a),Object(O["c"])(t.user),e.$refs["editForm"].resetFields(),e.editFormVisible=!1,e.getMenu())})})})},handleDel:function(e,t,a){var n=this;if(!this.check(a.target.innerText))return Object(k["Notification"])({title:"警告",message:"没有权限,请与管理员联系",type:"warning"}),!1;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){n.listLoading=!0;var e={id:t.id};Object(y["L"])(e).then(function(e){var t=[];n.listLoading=!1;var a=e.code,o=e.message,l=e.user;200!==a?n.$message({message:o,type:"error"}):(n.$message({message:o,type:"success"}),n.addMenu(e.user),Object(S["a"])(t,l),n.$router.options.routes=t,n.$router.addRoutes(t),Object(O["c"])(e.user),n.getMenu())})}).catch(function(){})}}),mounted:function(){this.getMenu()}},L=D,A=(a("1c67"),Object(F["a"])(L,n,o,!1,null,"a67ad234",null));t["default"]=A.exports},"74de":function(e,t,a){var n=a("d635"),o=a("2b11");e.exports=function(e,t,a){if(n(t))throw TypeError("String#"+a+" doesn't accept regex!");return String(o(e))}},"7b03":function(e,t,a){"use strict";var n=a("27b4"),o=a.n(n);o.a},"93fe":function(e,t,a){"use strict";var n=a("2d2c"),o=a("74de"),l="includes";n(n.P+n.F*a("dd8b")(l),"String",{includes:function(e){return!!~o(this,e,l).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},a173:function(e,t,a){},c2fd:function(e,t,a){"use strict";function n(e){this.$te("role"[e]);var t=this.$t("route."+e);return console.log(t),t}a.d(t,"a",function(){return n})},dd8b:function(e,t,a){var n=a("f3ae")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[n]=!1,!"/./"[e](t)}catch(o){}}return!0}},e0c1:function(e,t,a){"use strict";var n=a("2d2c"),o=a("0d0d")(!0);n(n.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("68fb")("includes")},e9b3:function(e,t,a){"use strict";var n=a("1d3f"),o=a.n(n);o.a}}]);
//# sourceMappingURL=chunk-4ea855a0.7e4fc37a.js.map