(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7585a53f","chunk-0821912a"],{"03ba":function(e,t,n){"use strict";var i=n("81d6"),l=n.n(i);l.a},"18f2":function(e,t,n){"use strict";var i=n("918c"),l=n.n(i);l.a},"30e0":function(e,t,n){},"6c35":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[n("el-form",{attrs:{inline:!0,model:e.filters}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"工号"},model:{value:e.filters.id,callback:function(t){e.$set(e.filters,"id",t)},expression:"filters.id"}})],1),n("el-form-item",[n("el-input",{attrs:{placeholder:"姓名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.toggleSelection(e.usermultipleSelection)}}},[e._v("查询")])],1)],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.users,"tooltip-effect":"dark","row-key":e.getRowKeys},on:{select:e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection","reserve-selection":!0,width:"55",align:"center"}}),n("el-table-column",{attrs:{type:"index",label:"ID",width:"60",align:"center"}}),n("el-table-column",{attrs:{prop:"job_number",label:"工号","min-width":"80",sortable:"",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"姓名","min-width":"80",sortable:"",align:"center"}}),n("el-table-column",{attrs:{prop:"mailbox",label:"邮箱","min-width":"90",sortable:"",align:"center"}})],1),n("el-col",{staticClass:"toolbar",attrs:{span:24}},[n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":10,total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},l=[],r=(n("3a23"),n("6f4f")),o=n.n(r),a=n("f0b9"),s=n.n(a),c=(n("a1d1"),n("612f"),n("a98d")),d=n("4ec3"),u=n("d73b"),m=n.n(u),h=(n("4360"),n("52c1")),f=(n("c1f9"),console.log.bind(console),{data:function(){return{filters:{name:"",id:""},users:[],multipleSelection:[],usermultipleSelection:[],unmultipleSelection:[],total:0,page:1,listLoading:!1,sels:[],currentPage:[],selectedData:[],getRowKeys:function(e){return e.id},select_order_number:"",select_Id:[]}},methods:Object(c["a"])({},Object(h["b"])(["addSelection"]),{handleCurrentChange:function(e){this.page=e,this.allSelection.length>0&&(this.unmultipleSelection=this.allSelection),this.getAdmin(this.unmultipleSelection)},handleSelectionChange:function(e,t){var n=this,i=[];console.log(e,t),this.unmultipleSelection.forEach(function(e){e.id==t.id&&n.unmultipleSelection.splice(n.unmultipleSelection.findIndex(function(e){return e.id===t.id}),1)});var l=i.concat(this.unmultipleSelection,e),r={};l=l.reduce(function(e,t){return!r[t.id]&&(r[t.id]=e.push(t)),e},[]),this.addSelection(l),this.$emit("childByValue",l)},MergeArray:function(e,t){for(var n=new Array,i=0;i<e.length;i++)""!=e[i]&&n.push(e[i]);for(var l=0;l<t.length;l++){for(var r=!0,o=0;o<e.length;o++)if(t[l].id==e[o].id){r=!1;break}r&&""!=t[l]&&n.push(t[l])}return n},getAdmin:function(e){var t=this;console.log(e),this.addSelection([]),console.log("vuex",this.allSelection),this.unmultipleSelection=s()(new o.a(e)),this.$emit("childByValue",this.unmultipleSelection);var n=JSON.parse(window.localStorage.getItem("userInfo")),i=JSON.parse(window.localStorage.getItem("row")),l={page:this.page,adminName:this.filters.name,menuId:i.id,roleId:n.role_id};this.listLoading=!0,Object(d["t"])(l).then(function(n){t.total=n.data.total,t.users=n.data.dataAdmin,t.listLoading=!1,e.length>0?e.forEach(function(e){t.users.forEach(function(n,i){e.id==n.id?t.$nextTick(function(){t.$refs.multipleTable.toggleRowSelection(t.users[i],!0)}):t.$refs.multipleTable.clearSelection()})}):t.$refs.multipleTable.clearSelection()})},toggleSelection:function(e){}}),created:function(){},mounted:function(){},computed:Object(c["a"])({},Object(h["c"])(["allSelection"])),components:{VDistpicker:m.a}}),p=f,g=(n("ec3e"),n("17cc")),b=Object(g["a"])(p,i,l,!1,null,"ccfca440",null);t["default"]=b.exports},"74de":function(e,t,n){var i=n("d635"),l=n("2b11");e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(l(e))}},"81d6":function(e,t,n){},"918c":function(e,t,n){},"93fe":function(e,t,n){"use strict";var i=n("2d2c"),l=n("74de"),r="includes";i(i.P+i.F*n("dd8b")(r),"String",{includes:function(e){return!!~l(this,e,r).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"990a":function(e,t,n){var i=n("9b6d");e.exports=Array.isArray||function(e){return"Array"==i(e)}},"9f35":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[n("el-form",{attrs:{inline:!0,model:e.filters}},[n("el-form-item",[n("el-input",{attrs:{placeholder:"角色名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.getRole}},[e._v("查询")])],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAdd(t)}}},[e._v("新增")])],1)],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.users,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),n("el-table-column",{attrs:{type:"index",label:"ID",width:"50",align:"center"}}),n("el-table-column",{attrs:{prop:"role_name",label:"角色名","min-width":"80",sortable:"",align:"center"}}),n("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"100",sortable:"",align:"center"}}),n("el-table-column",{attrs:{label:"操作","min-width":"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"small"},on:{click:function(n){return e.handleEdit(t.$index,t.row,n)}}},[e._v("编辑")]),n("el-button",{attrs:{size:"small"},on:{click:function(n){return e.handlepermission(t.$index,t.row,n)}},nativeOn:{mouseenter:function(n){return e.permissionhover(t.$index,t.row)}}},[e._v("添加权限")]),n("el-button",{attrs:{size:"small"},on:{click:function(n){return e.handleuser(t.$index,t.row,n)}}},[e._v("添加用户")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return e.handleDel(t.$index,t.row,n)}}},[e._v("删除")])]}}])})],1),n("el-col",{staticClass:"toolbar",attrs:{span:24}},[n("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":10,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),n("el-dialog",{attrs:{title:"新增",visible:e.addFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormVisible=t}}},[n("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"120px",rules:e.addFormRules}},[n("el-form-item",{attrs:{label:"角色名称",prop:"role_name"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.role_name,callback:function(t){e.$set(e.addForm,"role_name",t)},expression:"addForm.role_name"}})],1),n("el-form-item",{attrs:{label:"备注",prop:"remark"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.addForm.remark,callback:function(t){e.$set(e.addForm,"remark",t)},expression:"addForm.remark"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1),n("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[n("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"120px",rules:e.addFormRules}},[n("el-form-item",{attrs:{label:"角色名称",prop:"role_name"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.role_name,callback:function(t){e.$set(e.editForm,"role_name",t)},expression:"editForm.role_name"}})],1),n("el-form-item",{attrs:{label:"备注",prop:"remark"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("提交")])],1)],1),n("el-dialog",{attrs:{title:"添加权限",visible:e.permissionFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.permissionFormVisible=t}}},[n("el-form",{ref:"permissionForm",attrs:{model:e.permissionForm,"label-width":"120px"}},[n("tree-tables",{ref:"permission",attrs:{data:e.tree,rowid:e.rowid,columns:e.columns,border:""},on:{permissionSubmit:e.permissionSubmit}})],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{nativeOn:{click:function(t){e.permissionFormVisible=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary",loading:e.permissionLoading},nativeOn:{click:function(t){return e.permissionSubmit(t)}}},[e._v("提交")])],1)],1),n("el-dialog",{attrs:{title:"添加用户",visible:e.userFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.userFormVisible=t}}},[n("el-form",{ref:"userForm",attrs:{model:e.userForm,"label-width":"120px"}},[n("index",{ref:"Index",attrs:{usermultipleSelection:e.multipleSelection},on:{childByValue:e.childByValue}})],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{nativeOn:{click:function(t){e.userFormVisible=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary",loading:e.userLoading},nativeOn:{click:function(t){return e.userFormSubmit(t)}}},[e._v("提交")])],1)],1)],1)},l=[],r=(n("48fb"),n("6f4f")),o=n.n(r),a=(n("ea65"),n("f0b9")),s=n.n(a),c=(n("612f"),n("e4a7")),d=n.n(c),u=(n("e0c1"),n("93fe"),n("3a23"),n("a98d")),m=n("4ec3"),h=n("6c35"),f=n("52c1"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",e._b({attrs:{data:e.formatData,"row-style":e.showRow}},"el-table",e.$attrs,!1),[0===e.columns.length?n("el-table-column",{attrs:{width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row._level,function(e){return n("span",{key:e,staticClass:"ms-tree-space"})}),e.iconShow(0,t.row)?n("span",{staticClass:"tree-ctrl",on:{click:function(n){return e.toggleExpanded(t.$index)}}},[t.row._expanded?n("i",{staticClass:"el-icon-minus"}):n("i",{staticClass:"el-icon-plus"})]):e._e(),e._v("\n\n        "+e._s(t.$index)+"\n      ")]}}],null,!1,3921204250)}):e._l(e.columns,function(t,i){return n("el-table-column",{key:t.value,attrs:{label:t.text,width:t.width},scopedSlots:e._u([{key:"default",fn:function(l){return[e._l(l.row._level,function(t){return 0===i?n("span",{key:t,staticClass:"ms-tree-space"}):e._e()}),e.iconShow(i,l.row)?n("span",{staticClass:"tree-ctrl",on:{click:function(t){return e.toggleExpanded(l.$index)}}},[l.row._expanded?n("i",{staticClass:"el-icon-minus"}):n("i",{staticClass:"el-icon-plus"})]):e._e(),Array.isArray(l.row[t.value])?n("el-checkbox-group",{on:{change:function(n){return e.handleCheckedCitiesChange(l.$index,l.row,l.row[t.option])}},model:{value:l.row.selectchecked,callback:function(t){e.$set(l.row,"selectchecked",t)},expression:"scope.row.selectchecked"}},e._l(l.row[t.value],function(t){return n("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label)+"4")])}),1):2===l.row._level?n("el-checkbox",{attrs:{indeterminate:l.row.isIndeterminate},on:{change:function(n){return e.handleCheckAllChange(l.$index,l.row,l.row[t.option])}},model:{value:l.row.checkAll,callback:function(t){e.$set(l.row,"checkAll",t)},expression:"scope.row.checkAll"}},[e._v(e._s(l.row[t.value])+"3")]):n("span",[e._v(e._s(l.row[t.label])+"1")]),l.row[t.act]?n("el-checkbox",{attrs:{indeterminate:l.row.isIndeterminate},on:{change:function(n){return e.handleCheckAllChange1(l.$index,l.row,t.option)}},model:{value:l.row.checkAll,callback:function(t){e.$set(l.row,"checkAll",t)},expression:"scope.row.checkAll"}},[e._v(e._s(l.row[t.act])+"2")]):e._e()]}}],null,!0)})}),e._t("default")],2)],1)},g=[],b=n("b337"),v=n.n(b),k=n("2418"),w=n("c2fd");function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=[];return s()(e).forEach(function(e){void 0===e._expanded&&k["default"].set(e,"_expanded",t);var r=1;if(void 0!==i&&null!==i&&(r=i+1),1===r&&(k["default"].set(e,"isIndeterminate",!!e.isIndeterminate&&e.isIndeterminate),k["default"].set(e,"checkAll",!!e.checkAll&&e.checkAll),k["default"].set(e,"checked",!1),e.children.length>0&&k["default"].set(e,"act","全选")),k["default"].set(e,"_level",r),n&&k["default"].set(e,"parent",n),l.push(e),e.children&&0===e.children.length&&(k["default"].set(e,"checked",!1),k["default"].set(e,"checkAll",!!e.checkAll&&e.checkAll),k["default"].set(e,"isIndeterminate",!!e.isIndeterminate&&e.isIndeterminate),k["default"].set(e,"selectchecked",e.selectchecked?e.selectchecked:[])),e.children&&e.children.length>0){var o=_(e.children,t,e,r);l=l.concat(o)}}),l}n("4360");var y=n("c1f9"),x=n.n(y),F={name:"treeTables",props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!0}},mounted:function(){},computed:Object(u["a"])({},Object(f["c"])(["permission"]),{formatData:function(){var e;e=v()(this.data)?this.data:[this.data];var t=this.evalFunc||_,n=this.evalArgs?Array.concat([e,this.expandAll],this.evalArgs):[e,this.expandAll];return this.defaultSelcet(t.apply(null,n)),t.apply(null,n)}}),methods:{showRow:function(e){var t=!e.row.parent||e.row.parent._expanded&&e.row.parent._show;return e.row._show=t,t?"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;":"display:none;"},toggleExpanded:function(e){var t=this.formatData[e];t._expanded=!t._expanded},iconShow:function(e,t){return 0===e&&t.children&&t.children.length>0},handleCheckAllChange:function(e,t,n){if(console.log(e,t,n),this.cc(),t.selectchecked.length&&t.selectchecked.length!==n.length){var i=[];n.forEach(function(e){i.push(e.value)}),t.selectchecked=i,t.checkAll=!0,t.isIndeterminate=!1}else if(t.selectchecked.length)t.selectchecked=[],t.checkAll=!1,t.isIndeterminate=!1;else{var l=[];n.forEach(function(e){l.push(e.value)}),t.selectchecked=l,t.checkAll=!0,t.isIndeterminate=!1}},handleCheckedCitiesChange:function(e,t,n){console.log(e,t,n),t.checkAll=t.selectchecked.length===n.length,t.isIndeterminate=t.selectchecked.length>0&&t.selectchecked.length<n.length,this.cc()},handleCheckAllChange1:function(e,t,n){console.log(e,t,n),t.children.length>0&&t.children.forEach(function(e){var i=[];t.checkAll?(e[n].forEach(function(e){i.push(e.value)}),e.selectchecked=i,e.checkAll=!0,e.isIndeterminate=!1):(e.selectchecked=[],e.checkAll=!1,e.isIndeterminate=!1)}),this.cc()},defaultSelcet:function(e){var t=this;e.forEach(function(e){e.children.length>0?(e.children.forEach(function(e){e.selectchecked.length&&e.selectchecked.length!==e[t.columns[0].option].length?(e.isIndeterminate=!0,e.checkAll=!1):e.selectchecked.length&&e.selectchecked.length===e[t.columns[0].option].length?(e.isIndeterminate=!1,e.checkAll=!0):(e.isIndeterminate=!1,e.checkAll=!1)}),t.cc()):t.cc()})},cc:function(){this.data.forEach(function(e){var t=[],n=[];e.children.length>0?e.children.forEach(function(e){t.push(e.checkAll),n.push(e.isIndeterminate)}):(t.push(e.checkAll),n.push(e.isIndeterminate)),1===new o.a(t).size?t[0]&&!1===n[0]?(e.isIndeterminate=!1,e.checkAll=!0):t[0]&&1!==new o.a(n).size?(e.isIndeterminate=!1,e.checkAll=!0):t[0]||1===new o.a(n).size?t[0]||1!==new o.a(n).size?(console.log(7),e.isIndeterminate=!1,e.checkAll=!1):n[0]?(e.isIndeterminate=!0,e.checkAll=!1):(e.isIndeterminate=!1,e.checkAll=!1):(e.isIndeterminate=!0,e.checkAll=!1):(e.isIndeterminate=!0,e.checkAll=!1)})},permissionSubmit:function(){return this.data},generateTitle:w["a"]}},S=F,A=(n("03ba"),n("18f2"),n("17cc")),$=Object(A["a"])(S,p,g,!1,null,"0181d39a",null),I=$.exports,O=n("6191"),C=n("5f87"),j=n("26e8"),L={name:"treeTableDemo",components:{treeTables:I,Index:h["default"],generateTitle:w["a"]},data:function(){return{columns:[{text:"菜单列表",value:"childname",label:"redirect",width:200,option:"sonData"},{text:"功能权限",value:"sonData",option:"sonData",act:"act"}],filters:{name:"",id:""},users:[],multipleSelection:[],dataList:[],tree:[],rowid:"",defaultProps:{children:"children",label:"label"},total:0,page:1,listLoading:!1,sels:[],role:[],editFormVisible:!1,editLoading:!1,addLoading:!1,addFormVisible:!1,permissionFormVisible:!1,permissionLoading:!1,userFormVisible:!1,userLoading:!1,addFormRules:{hospital_name:[{required:!0,message:"请输入医院名称",trigger:"blur"}],region_type:[{required:!0,message:"请选择所属大区",trigger:"change"}],name:[{required:!0,message:"请输入负责人姓名",trigger:"blur"}]},addForm:{role_name:"",remark:""},editForm:{role_name:"",remark:""},permissionForm:{checked:[],role_id:""},userForm:{multipleSelection:[]}}},methods:Object(u["a"])({},Object(f["b"])(["addSelection"]),{handleCurrentChange:function(){},getRole:function(){var e=this,t=JSON.parse(window.localStorage.getItem("userInfo")),n=JSON.parse(window.localStorage.getItem("row")),i={page:this.page,roleName:this.filters.name,menuId:n.id,roleId:t.role_id};this.listLoading=!0,Object(m["B"])(i).then(function(t){e.total=t.total,e.users=t.dataRole,e.listLoading=!1,e.role=t.role})},handleAdd:function(e){if(console.log(e.target.innerText),!this.check(e.target.innerText))return Object(j["Notification"])({title:"警告",message:"没有权限,请与管理员联系",type:"warning"}),!1;this.addFormVisible=!0,this.addForm={role_name:"",remark:""}},check:function(e){return this.role.includes(e)},addSubmit:function(e){var t=this;this.$refs.addForm.validate(function(e){e&&t.$confirm("确认提交吗？","提示",{}).then(function(){t.addLoading=!0;var e=d()({},t.addForm);console.log(e),Object(m["f"])(e).then(function(e){t.addLoading=!1;var n=e.code,i=e.message;200!==n?t.$message({message:i,type:"error"}):(t.$message({message:i,type:"success"}),t.$refs["addForm"].resetFields(),t.addFormVisible=!1,t.getRole())})})})},handleEdit:function(e,t,n){if(!this.check(n.target.innerText))return Object(j["Notification"])({title:"警告",message:"没有权限,请与管理员联系",type:"warning"}),!1;this.editFormVisible=!0,this.editForm=d()({},t)},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=d()({},e.editForm);t.birth=t.birth&&""!=t.birth?util.formatDate.format(new Date(t.birth),"yyyy-MM-dd"):"",Object(m["s"])(t).then(function(t){e.editLoading=!1,e.$message({message:"提交成功",type:"success"}),e.$refs["editForm"].resetFields(),e.editFormVisible=!1,e.getRole()})})})},handlepermission:function(e,t,n){this.permissionFormVisible=!0;var i=JSON.parse(window.localStorage.getItem("userInfo"));this.permissionForm={checked:[],role_id:t.id,role_name:t.role_name,admin_id:i.role_id};var l=t.id;this.rolePermission(l)},rolePermission:function(e){var t=this;Object(m["O"])(e).then(function(e){var n=t,i=e.role_permission;console.log(i),s()(i).forEach(function(e){n.permission.forEach(function(t){if(0===e.children.length){var i=[];n.permission.forEach(function(t){e.id===x.a.split(t,"_",2)[0]&&i.push(t)}),e.selectchecked=i}else e.children.length>0&&e.children.forEach(function(e){var t=[];n.permission.forEach(function(n){e.id===x.a.split(n,"_",2)[0]&&t.push(n)}),e.selectchecked=t})})}),t.tree=i})},permissionSubmit:function(){var e=this,t=this.$refs.permission.permissionSubmit();this.$refs.permissionForm.validate(function(n){n&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.permissionLoading=!0;var n=[];t.forEach(function(e){e.children.length>0?e.children.forEach(function(e){e.selectchecked.length&&n.push(e.selectchecked)}):e.selectchecked.length>0&&n.push(e.selectchecked)}),n=n.join().split(",").filter(function(e){return e}),n=s()(new o.a(n)),e.permissionForm.checked=n,e.addPermission(e.permissionForm.checked);var i=d()({},e.permissionForm);console.log(i),Object(m["P"])(i).then(function(t){e.permissionLoading=!1;var n=[];200===t.code&&(e.$message({message:t.message,type:"success"}),console.log(t.data),e.addMenu(t.data),Object(O["a"])(n,t.data),e.$router.options.routes=n,e.$router.addRoutes(n),Object(C["c"])(t.data),e.$refs["permissionForm"].resetFields(),e.permissionFormVisible=!1,e.getRole())})})})},permissionhover:function(e,t){var n=this,i={row_id:t.id};Object(m["z"])(i).then(function(e){n.addPermission(e.dataPermission)})},handleuser:function(e,t,n){var i=this;if(!this.check(n.target.innerText))return Object(j["Notification"])({title:"警告",message:"没有权限,请与管理员联系",type:"warning"}),!1;this.userFormVisible=!0,this.userForm={multipleSelection:[],user_id:t.id};var l={user_id:t.id};this.$nextTick(function(){Object(m["C"])(l).then(function(e){e.dataUser[0]?i.$refs.Index.getAdmin(e.dataUser[0].multipleSelection):i.$refs.Index.getAdmin([])})})},childByValue:function(e){console.log(e),this.userForm.multipleSelection=e},userFormSubmit:function(){var e=this;this.$refs.userForm.validate(function(t){if(t){var n=d()({},e.userForm);console.log(n),e.$confirm("确认提交吗？","提示",{}).then(function(){e.userLoading=!0,Object(m["Q"])(n).then(function(t){e.userLoading=!1,e.$message({message:"提交成功",type:"success"}),e.$refs["userForm"].resetFields(),e.userFormVisible=!1,e.addSelection([])})})}})},handleDel:function(e,t,n){var i=this;if(!this.check(n.target.innerText))return Object(j["Notification"])({title:"警告",message:"没有权限,请与管理员联系",type:"warning"}),!1;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){i.listLoading=!0;var e={id:t.id};Object(m["N"])(e).then(function(e){i.listLoading=!1,i.$message({message:"删除成功",type:"success"}),i.getRole()})}).catch(function(){})},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this,t=this.sels.map(function(e){return e.id}).toString();this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0;var n={ids:t};Object(m["k"])(n).then(function(t){e.listLoading=!1,e.$message({message:"删除成功",type:"success"}),e.getRole()})}).catch(function(){})}},Object(f["b"])(["addPermission","addMenu"]),{generateTitle:w["a"]}),mounted:function(){this.getRole()},computed:Object(u["a"])({},Object(f["c"])(["permission","userInfo"]))},V=L,E=(n("ca17"),Object(A["a"])(V,i,l,!1,null,"685cd099",null));t["default"]=E.exports},a1d1:function(e,t,n){"use strict";var i=n("2d2c"),l=n("ea02")(6),r="findIndex",o=!0;r in[]&&Array(1)[r](function(){o=!1}),i(i.P+i.F*o,"Array",{findIndex:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}}),n("68fb")(r)},c027:function(e,t,n){var i=n("b429"),l=n("990a"),r=n("f3ae")("species");e.exports=function(e){var t;return l(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!l(t.prototype)||(t=void 0),i(t)&&(t=t[r],null===t&&(t=void 0))),void 0===t?Array:t}},c2fd:function(e,t,n){"use strict";function i(e){this.$te("role"[e]);var t=this.$t("route."+e);return console.log(t),t}n.d(t,"a",function(){return i})},ca17:function(e,t,n){"use strict";var i=n("d567"),l=n.n(i);l.a},cecc:function(e,t,n){var i=n("c027");e.exports=function(e,t){return new(i(e))(t)}},d567:function(e,t,n){},dd8b:function(e,t,n){var i=n("f3ae")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(l){}}return!0}},e0c1:function(e,t,n){"use strict";var i=n("2d2c"),l=n("0d0d")(!0);i(i.P,"Array",{includes:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}}),n("68fb")("includes")},ea02:function(e,t,n){var i=n("0709"),l=n("240e"),r=n("aa91"),o=n("33f2"),a=n("cecc");e.exports=function(e,t){var n=1==e,s=2==e,c=3==e,d=4==e,u=6==e,m=5==e||u,h=t||a;return function(t,a,f){for(var p,g,b=r(t),v=l(b),k=i(a,f,3),w=o(v.length),_=0,y=n?h(t,w):s?h(t,0):void 0;w>_;_++)if((m||_ in v)&&(p=v[_],g=k(p,_,b),e))if(n)y[_]=g;else if(g)switch(e){case 3:return!0;case 5:return p;case 6:return _;case 2:y.push(p)}else if(d)return!1;return u?-1:c||d?d:y}}},ec3e:function(e,t,n){"use strict";var i=n("30e0"),l=n.n(i);l.a}}]);
//# sourceMappingURL=chunk-7585a53f.813a32f5.js.map