(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0578dff8"],{"0034":function(e,t,o){"use strict";var r=o("8c65"),i=o.n(r);i.a},"74de":function(e,t,o){var r=o("d635"),i=o("2b11");e.exports=function(e,t,o){if(r(t))throw TypeError("String#"+o+" doesn't accept regex!");return String(i(e))}},"8c65":function(e,t,o){},"93fe":function(e,t,o){"use strict";var r=o("2d2c"),i=o("74de"),l="includes";r(r.P+r.F*o("dd8b")(l),"String",{includes:function(e){return!!~i(this,e,l).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},b7b3:function(e,t,o){"use strict";o.r(t);var r,i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",[o("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[o("el-form",{attrs:{inline:!0,model:e.filters}},[o("el-form-item",[o("el-input",{attrs:{placeholder:"协议模板名称"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.getProtocol}},[e._v("查 询")])],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAdd(t)}}},[e._v(" 新增")])],1)],1)],1),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.protocol,"highlight-current-row":""},on:{"selection-change":e.selsChange}},[o("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),o("el-table-column",{attrs:{type:"index",label:"ID",width:"60",align:"center"}}),o("el-table-column",{attrs:{prop:"protocol_name",label:"协议模板名称","min-width":"150",sortable:"",align:"center"}}),o("el-table-column",{attrs:{prop:"protocol_provider",label:"协议模板提供方","min-width":"100",sortable:"",align:"center"}}),o("el-table-column",{attrs:{prop:"provider_name",label:"协议模板提供方名称","min-width":"150",sortable:"",align:"center"}}),o("el-table-column",{attrs:{prop:"createTime",label:"更新时间","min-width":"100",sortable:"",align:"center"}}),o("el-table-column",{attrs:{label:"操作","min-width":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"small"},on:{click:function(o){return e.handleEdit(t.$index,t.row,o)}}},[e._v("编辑")]),o("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(o){return e.handleDel(t.$index,t.row,o)}}},[e._v("删除")])]}}])})],1),o("el-col",{staticClass:"toolbar",attrs:{span:24}},[o("el-button",{attrs:{type:"danger",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v("批量删除")]),o("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":10,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),o("el-dialog",{attrs:{title:"新增",visible:e.addFormProtocol,"close-on-click-modal":!1},on:{"update:visible":function(t){e.addFormProtocol=t}}},[o("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"130px",rules:e.addFormRules}},[o("el-form-item",{attrs:{label:"协议模板名称",prop:"protocol_name"}},[o("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.addForm.protocol_name,callback:function(t){e.$set(e.addForm,"protocol_name",t)},expression:"addForm.protocol_name"}})],1),o("el-form-item",{attrs:{label:"协议模板提供方",prop:"protocol_provider"}},[o("el-radio-group",{on:{change:e.onchange},model:{value:e.addForm.protocol_provider,callback:function(t){e.$set(e.addForm,"protocol_provider",t)},expression:"addForm.protocol_provider"}},[o("el-radio",{attrs:{label:"医院"}}),o("el-radio",{attrs:{label:"申办方"}}),o("el-radio",{attrs:{label:"smo"}})],1)],1),(e.addForm.protocol_provider==e.row.housptal?e.checkState:!e.checkState)?o("el-form-item",[o("el-form-item",{class:e.itemclass,attrs:{label:"所属省/市",prop:"provincecity"}},[o("v-distpicker",{attrs:{name:e.select,id:"city","hide-area":"",province:e.addForm.provincecity.province,city:e.addForm.provincecity.city,value:e.select},on:{selected:e.onSelected},model:{value:e.addForm.provincecity,callback:function(t){e.$set(e.addForm,"provincecity",t)},expression:"addForm.provincecity"}})],1),o("el-form-item",{class:e.itemclass,attrs:{label:"所属医院",prop:"provider_name"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.provider_name,callback:function(t){e.$set(e.addForm,"provider_name",t)},expression:"addForm.provider_name"}},e._l(e.provider_name,function(e){return o("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1),o("el-form-item",{class:e.itemclass,attrs:{label:"指定申办方",prop:"provider"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.provider,callback:function(t){e.$set(e.addForm,"provider",t)},expression:"addForm.provider"}},e._l(e.provider,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1):e._e(),(e.addForm.protocol_provider==e.row.applicant?e.checkState:!e.checkState)?o("el-form-item",[o("el-form-item",{class:e.itemclass,attrs:{label:"所属申办方",prop:"provider_name"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.provider_name,callback:function(t){e.$set(e.addForm,"provider_name",t)},expression:"addForm.provider_name"}},e._l(e.provider,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),o("el-form-item",{class:e.itemclass,attrs:{label:"所属省/市",prop:"provincecity"}},[o("v-distpicker",{attrs:{"hide-area":"",province:e.select.province,city:e.select.city,value:e.select},on:{selected:e.onSelected},model:{value:e.addForm.provincecity,callback:function(t){e.$set(e.addForm,"provincecity",t)},expression:"addForm.provincecity"}})],1),o("el-form-item",{class:e.itemclass,attrs:{label:"指定医院",prop:"provider_name"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.provider,callback:function(t){e.$set(e.addForm,"provider",t)},expression:"addForm.provider"}},e._l(e.provider_name,function(e){return o("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1)],1):e._e()],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(t){e.addFormProtocol=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1),o("el-dialog",{attrs:{title:"编辑",visible:e.editFormProtocol,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormProtocol=t}}},[o("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"130px",rules:e.addFormRules}},[o("el-form-item",{attrs:{label:"协议模板名称",prop:"protocol_name"}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.protocol_name,callback:function(t){e.$set(e.editForm,"protocol_name",t)},expression:"editForm.protocol_name"}})],1),o("el-form-item",{attrs:{label:"协议模板提供方",prop:"protocol_provider"}},[o("el-radio-group",{on:{change:e.onchange},model:{value:e.editForm.protocol_provider,callback:function(t){e.$set(e.editForm,"protocol_provider",t)},expression:"editForm.protocol_provider"}},[o("el-radio",{attrs:{label:"医院"}}),o("el-radio",{attrs:{label:"申办方"}}),o("el-radio",{attrs:{label:"smo"}})],1)],1),(e.editForm.protocol_provider==e.row.housptal?e.checkState:!e.checkState)?o("el-form-item",[o("el-form-item",{class:e.itemclass,attrs:{label:"所属省/市",prop:"provincecity"}},[o("v-distpicker",{attrs:{"hide-area":"",province:e.select.province,city:e.select.city},on:{selected:e.onSelected},model:{value:e.editForm.provincecity,callback:function(t){e.$set(e.editForm,"provincecity",t)},expression:"editForm.provincecity"}})],1),o("el-form-item",{class:e.itemclass,attrs:{label:"所属医院",prop:"provider_name"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.provider_name,callback:function(t){e.$set(e.editForm,"provider_name",t)},expression:"editForm.provider_name"}},e._l(e.provider_name,function(e){return o("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1),o("el-form-item",{class:e.itemclass,attrs:{label:"指定申办方",prop:"provider"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.provider,callback:function(t){e.$set(e.editForm,"provider",t)},expression:"editForm.provider"}},e._l(e.provider,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1):e._e(),(e.editForm.protocol_provider==e.row.applicant?e.checkState:!e.checkState)?o("el-form-item",[o("el-form-item",{class:e.itemclass,attrs:{label:"所属申办方",prop:"provider_name"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.provider_name,callback:function(t){e.$set(e.editForm,"provider_name",t)},expression:"editForm.provider_name"}},e._l(e.provider,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),o("el-form-item",{class:e.itemclass,attrs:{label:"所属省/市",prop:"provincecity"}},[o("v-distpicker",{attrs:{"hide-area":"",province:e.select.province,city:e.select.city},on:{selected:e.onSelected},model:{value:e.editForm.provincecity,callback:function(t){e.$set(e.editForm,"provincecity",t)},expression:"editForm.provincecity"}})],1),o("el-form-item",{class:e.itemclass,attrs:{label:"指定医院",prop:"provider"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.provider,callback:function(t){e.$set(e.editForm,"provider",t)},expression:"editForm.provider"}},e._l(e.provider_name,function(e){return o("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1)],1):e._e()],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(t){e.editFormProtocol=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("提交")])],1)],1)],1)},l=[],a=o("d4fd"),n=(o("48fb"),o("e4a7")),c=o.n(n),s=(o("e0c1"),o("93fe"),o("3a23"),o("5c07"),o("53da"),o("2556"),o("d0f8"),o("4ec3")),d=o("d73b"),p=o.n(d),m=o("26e8"),u={data:function(){return{filters:{name:""},row:{housptal:"医院",applicant:"申办方",smo:"smo"},role:[],protocol_province:"",protocol_city:"",itemclass:"item-children",noneclass:"none",currentId:"",checkState:!0,protocol:[],flag:"",provider_name:"",provider:"",select:{},citys:"",cityDetails:"",upNum:0,provider_type:3,total:0,page:1,listLoading:!1,sels:[],editFormProtocol:!1,editLoading:!1,addLoading:!1,addFormProtocol:!1,addFormRules:{protocol_name:[{required:!0,message:"请输入协议模板名称",trigger:"blur"}],protocol_provider:[{required:!0,message:"请选择模板提供方",trigger:"change"}]},addForm:{protocol_name:"",protocol_provider:"",provincecity:{province:"",city:""},provider_name:"",provider:"",protocol_province:"",protocol_city:""},editForm:{protocol_name:"",protocol_provider:"",provincecity:{province:"",city:""},provider_name:"",provider:"",protocol_province:"",protocol_city:""}}},methods:(r={selsChange:function(){},formatSex:function(){},onSelected:function(e){var t=this;console.log(this.editForm.protocol_provider),this.protocol_province=e.province.value,this.protocol_city=e.city.value;var o={province:e.province.value,city:e.city.value};Object(s["x"])(o).then(function(e){t.row.applicant==t.editForm.protocol_provider?(console.log("申办方指定医院"),0==e.length?t.editForm.provider="":""==t.provider_name?t.provider_name=e:t.provider_name[0].value!=e[0].value&&(t.editForm.provider=""),t.provider_name=e):(0==e.length?t.editForm.provider_name="":""==t.provider_name?t.provider_name=e:t.provider_name[0].value!=e[0].value&&(t.editForm.provider_name=""),t.provider_name=e)})},onchange:function(e){this.currentId=e,console.log(e)},handleCurrentChange:function(e){this.page=e,this.getProtocol()},getProtocol:function(){var e=this,t=JSON.parse(window.localStorage.getItem("userInfo")),o=JSON.parse(window.localStorage.getItem("row")),r={page:this.page,protocolName:this.filters.name,menuId:o.id,roleId:t.role_id};this.listLoading=!0,Object(s["A"])(r).then(function(t){e.total=t.data.total,e.protocol=t.data.dataProtocol,e.listLoading=!1,e.role=t.data.role})},handleAdd:function(e){var t=this;if(!this.check(e.target.innerText))return Object(m["Notification"])({title:"警告",message:"没有权限,请与管理员联系",type:"warning"}),!1;this.addFormProtocol=!0,this.addForm={protocol_name:"",protocol_provider:"",provincecity:"",hospital_name:"",applicant_name:"",protocol_province:"",protocol_city:""},this.select={province:"",city:""},console.log(this.currentId),Object(s["u"])().then(function(e){t.provider=e.data})},check:function(e){return this.role.includes(e)},addSubmit:function(e){var t=this;this.$refs.addForm.validate(function(e){e&&t.$confirm("确认提交吗？","提示",{}).then(function(){t.addLoading=!0;var e=c()({},t.addForm);e.protocol_province=t.protocol_province,e.protocol_city=t.protocol_city,console.log(e),Object(s["e"])(e).then(function(e){t.addLoading=!1;var o=e.code,r=e.message;200!==o?t.$message({message:r,type:"error"}):(t.$message({message:r,type:"success"}),t.$refs["addForm"].resetFields(),t.addFormProtocol=!1,t.getProtocol())})})})},handleEdit:function(e,t,o){var r=this;if(!this.check(o.target.innerText))return Object(m["Notification"])({title:"警告",message:"没有权限,请与管理员联系",type:"warning"}),!1;t.id,this.editFormProtocol=!0,this.editForm=c()({},t),this.select.province=t.protocol_province,this.select.city=t.protocol_city,Object(s["u"])().then(function(e){r.provider=e.data});var i={province:t.protocol_province,city:t.protocol_city};Object(s["x"])(i).then(function(e){r.provider_name=e}),this.flag=t.provider_name},close:function(){this.select={}},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t=c()({},e.editForm);t.birth=t.birth&&""!=t.birth?util.formatDate.format(new Date(t.birth),"yyyy-MM-dd"):"",Object(s["r"])(t).then(function(t){e.editLoading=!1,e.$message({message:"提交成功",type:"success"}),e.$refs["editForm"].resetFields(),e.editFormProtocol=!1,e.getProtocol()})})})},handleDel:function(e,t,o){var r=this;if(!this.check(o.target.innerText))return Object(m["Notification"])({title:"警告",message:"没有权限,请与管理员联系",type:"warning"}),!1;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(function(){r.listLoading=!0;var e={id:t.id};Object(s["M"])(e).then(function(e){r.listLoading=!1,r.$message({message:"删除成功",type:"success"}),r.getProtocol()})}).catch(function(){})}},Object(a["a"])(r,"selsChange",function(e){this.sels=e}),Object(a["a"])(r,"batchRemove",function(){var e=this,t=this.sels.map(function(e){return e.id}).toString();this.$confirm("确认删除选中记录吗？","提示",{type:"warning"}).then(function(){e.listLoading=!0;var o={ids:t};Object(s["j"])(o).then(function(t){e.listLoading=!1,e.$message({message:"删除成功",type:"success"}),e.getProtocol()})}).catch(function(){})}),r),mounted:function(){this.getProtocol()},components:{VDistpicker:p.a}},v=u,f=(o("0034"),o("17cc")),h=Object(f["a"])(v,i,l,!1,null,"7e81af3e",null);t["default"]=h.exports},dd8b:function(e,t,o){var r=o("f3ae")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(o){try{return t[r]=!1,!"/./"[e](t)}catch(i){}}return!0}},e0c1:function(e,t,o){"use strict";var r=o("2d2c"),i=o("0d0d")(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("68fb")("includes")}}]);
//# sourceMappingURL=chunk-0578dff8.20106f40.js.map